---
date: 2025-08-21
readtime: 2
title: Starting PCB v1.1 and Researching Voltage Regulators
description: 
---

## Planned Tasks

- [x] Modify circuit to use the AP2112R5-3.3TRG1
- [x] Find battery and connectors


## Schematic and PCB

- Created the symbols and footprints for the MPU6050 and BMP180
- Updated schematic to implement the AP2112R5 instead of the previous TSP65001 for a voltage regulated
	- Removed unused parts and updated [PCB v1.1 BOM](#version_PCB-v1_1)
- Updated [PCB v1.1 Electrical](#version_PCB-v1_1) to match current component specifications
- Began PCB design


## PCB Design

- Tried to keep all motor components close together near the connector to minimize the loop
	- Diode, cap, MOSFET
- Used the KiCad calculator to find appropriate trace widths for the various sections, depending on the maximum expected current
	- 0.2mm for regular sensor traces 
	- 0.3mm for ESP to MOSFET connections 
	- 1mm for MOTOR_3.7V to motor connectors (Max 3.5A)
	- 2mm for battery to capacitor and TVR diode (Max 7A)
- Tried various placements of parts in order to ensure that there is no interference or overlap
	- The ESP32 UBC-C input and the 100uF capacitor
- Used two different ground places on different sides to isolate the two power rails
- Tied these to the various ground points by using different sizes of vias, which were calculated using the KiCad calculator
- All components verified and first PCB iteration should be complete

Updated schematic and current design of the PCB is added to [V1.1 BOM](#version_PCB-v1_1).


## Battery

- Found some similar batteries online that used the more universal JST connector instead
	- 3.7V, 500mAh
- Ensured that the connector and the one on the PCB design is compatible
	- **Important:** battery leads might need to be switched as the polarity might be different than needed
- Found a corresponding 3.7V LiPo battery charger online to charge the battery
- Finalized and ordered these parts


## Finalized v1.1 Components

![3D render of prototype board - v1.1[caption]](../assets/Board_3D_Proto_v1.1.png "3D render of prototype board - v1.1")
![PCB layout of prototype board - v1.1[caption]](../assets/Board_PCB_Proto_v1.1.png "PCB layout of prototype board - v1.1")
![Motor control board schematic - v1.1[caption]](../assets/Board_Motor_Schm_Proto_v1.1.png "Motor control board schematic - v1.1")
![Power board schematic - v1.1[caption]](../assets/Board_Power_Schm_Proto_v1.1.png "Power board schematic - v1.1")



**Todo:**
- Once arrived, ensure that the battery and charger are compatible, and that the connectors are compatible with the PCB
- Finalize the schematic and do last checks
- Finalize the BOM
- Order parts off DigiKey